cartesian_impedance_controller:
  joints:
    type: string_array
    description: "Names of the joints"

  end_effector_frame:
    type: string
    description: "Name of the end-effector frame"

  base_frame:
    type: string
    default_value: ""
    description: "Name of the end-effector frame"

  use_operational_space:
    type: bool
    default_value: False
    description: "Whether we use operational space control or cartesian impedance control"

  task:
    k_pos_x:
      type: double
      default_value: 500.0
      description: "Stiffness in the x direction for the translation"
      validation:
        bounds<>: [0.0, 2000.0]
    k_pos_y:
      type: double
      default_value: 500.0
      description: "Stiffness in the y direction for the translation"
      validation:
        bounds<>: [0.0, 2000.0]
    k_pos_z:
      type: double
      default_value: 500.0
      description: "Stiffness in the z direction for the translation"
      validation:
        bounds<>: [0.0, 2000.0]
    k_rot_x:
      type: double
      default_value: 30.0
      description: "Stiffness in the x direction for the orientation"
      validation:
        bounds<>: [0.0, 2000.0]
    k_rot_y:
      type: double
      default_value: 30.0
      description: "Stiffness in the y direction for the orientation"
      validation:
        bounds<>: [0.0, 2000.0]
    k_rot_z:
      type: double
      default_value: 30.0
      description: "Stiffness in the z direction for the orientation"
      validation:
        bounds<>: [0.0, 2000.0]

  nullspace:
    stiffness:
      type: double
      default_value: 1.0
      description: "Stiffness of the nullspace controller."
      validation:
        bounds<>: [0.0, 500.0]
    weights:
      type: double_array
      default_value: []
      description: "Weights for each joint for the nullspace parameters."
    regularization:
      type: double
      default_value: 0.000001
      description: "Regularization value for the pseudo-inverse."
      validation:
        bounds<>: [0.000001, 0.0001]
    use_dynamic_projector:
      type: bool
      default_value: true
      description: "Whether to the dynamic nullspace projector or not."
    max_tau:
      type: double
      default_value: 5
      description: "Maximal torque value that can be applied in the nullspace. This is used to be sure that we do not interfere with the main task."

  noise:
    add_random_noise:
      type: bool
      default_value: false
      description: "Whether or not we add random noise to the torques. This is just to test for stability."
    amplitude:
      type: double
      default_value: 0.0
      description: "Magnitude of the added noise, if added."
      validation:
        bounds<>: [0.0, 10.0]

  max_delta:
    type: double_array
    default_value: [0.1, 0.1, 0.1, 0.5, 0.5, 0.5]
    description: "Max allowed displacement. This is used to clamp the (twist) error."

  use_friction:
    type: bool
    default_value: false
    description: "Use friction compensation"

  use_coriolis_compensation:
    type: bool
    default_value: false
    description: "Use coriolis compensation"

  use_local_jacobian:
    type: bool
    default_value: false
    description: "If true, we use the local jacobian for computations, otherwise we use the world jacobian."

  log:
    enabled:
      type: bool
      default_value: false
      description: "If set so to true, log some debugging statements."
    robot_state:
      type: bool
      default_value: false
      description: "If set so to true, log the robot state like the joint state and end effector position."
    limits:
      type: bool
      default_value: false
      description: "If set so to true, log the limits of each joint."
    controller_parameters:
      type: bool
      default_value: false
      description: "If set so to true, log the controller parameters like the stiffness, damping..."
    computed_torques:
      type: bool
      default_value: false
      description: "If set so to true, log the individual computed torques."
    dynamic_params:
      type: bool
      default_value: false
      description: "If set so to true, log the dynamic_params like the mass matrix, operational mass matrix..."
    timing:
      type: bool
      default_value: false
      description: "If true, the time required by the loop will be displayed."

  filter:
    target_pose:
      type: double
      default_value: 0.1
      description: "Amount of smoothing for the target pose when using the EMA."
      validation:
        bounds<>: [0.00001, 0.99999]
    q:
      type: double
      default_value: 0.1
      description: "Amount of smoothing for the target pose when using the EMA."
      validation:
        bounds<>: [0.00001, 0.99999]
    dq:
      type: double
      default_value: 0.1
      description: "Amount of smoothing for the target pose when using the EMA."
      validation:
        bounds<>: [0.00001, 0.99999]

  limit_torques:
    type: bool
    default_value: true
    description: "Limit torques"

  max_delta_tau:
    type: double
    default_value: 0.5
    description: "Max allowed change in torque per joint per control loop."
